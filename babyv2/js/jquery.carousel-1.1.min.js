!function(i){var e=function(e,t){var n=i.extend({},i.fn.carousel.defaults,t),r=this,e=i(e),o=e.children(".slides")
o.children("div").addClass("slideItem")
var a=o.children(".slideItem"),d=a.find("img"),h=0,c=0,s=a.length,l=!1,f=!0
videos={youtube:{reg:/youtube\.com\/watch/i,split:"=",index:1,url:"http://www.youtube.com/embed/%id%?autoplay=1&amp;fs=1&amp;rel=0"},vimeo:{reg:/vimeo\.com/i,split:"/",index:3,url:"http://player.vimeo.com/video/%id%?portrait=0&amp;autoplay=1"}},this.current=h,this.length=s,this.init=function(){var i=n
q(),1==i.directionNav&&P(),"none"!=i.buttonNav&&Y(),1==i.reflection&&W(),1==i.shadow&&B(),1==i.description&&R(),1==i.autoplay&&$(),E()}
var u=function(i){var e,t=n,r=s,o=t.frontWidth,a=t.frontHeight
if(0!=i)if("center"==t.hAlign)if(i>0&&i<=Math.ceil((r-1)/2)){var d=u(i-1)
o=t.backZoom*d.width,a=t.backZoom*d.height}else{var h=u(r-i)
o=h.width,a=h.height}else if(i==r-1)o=t.frontWidth/t.backZoom,a=t.frontHeight/t.backZoom
else{var d=u(i-1)
o=t.backZoom*d.width,a=t.backZoom*d.height}return e={width:o,height:a}},v=function(i){var e,t=n,r=s,o=t.frontWidth,a=t.frontHeight+T(i)+X(i)
if(0!=i)if("center"==t.hAlign)if(i>0&&i<=Math.ceil((r-1)/2)){var d=u(i-1)
o=t.backZoom*d.width,a=t.backZoom*d.height+T(i)+X(i)}else{var h=v(r-i)
o=h.width,a=h.height}else if(i==r-1)o=t.frontWidth/t.backZoom,a=t.frontHeight/t.backZoom+T(i)+X(i)
else{var d=u(i-1)
o=t.backZoom*d.width,a=t.backZoom*d.height+T(i)+X(i)}return e={width:o,height:a}},g=function(i){var e,t,r,o=n,a=u(i)
return e=a.height*o.vMargin,t=a.width*o.hMargin,r={vMargin:e,hMargin:t}},p=function(i){var e=n,t=m(i-1)+(u(i-1).height-u(i).height)/2
return"center"!=e.hAlign&&i==s-1&&(t=e.top-(u(i).height-u(0).height)/2),t},m=function(i){var e=n,t=e.top,r=g(i).vMargin
return"bottom"==e.vAlign&&(t=e.bottom),0!=i&&(t="center"==e.hAlign?i>0&&i<=Math.ceil((s-1)/2)?"center"==e.vAlign?p(i):p(i)+r:m(s-i):i==s-1?"center"==e.vAlign?p(i):p(i)-r:"center"==e.vAlign?p(i):p(i)+r),t},b=function(i){var e,t=n,r=s,o=r%2,a=r/2,d=g(i).hMargin
return 0==i?"center"==t.hAlign?e=(t.carouselWidth-t.frontWidth)/2:(e=t.left,"right"==t.hAlign&&(e=t.right)):"center"==t.hAlign?i>0&&i<=Math.ceil((r-1)/2)?(e=b(i-1)-d,0==o&&i==a&&(e=(t.carouselWidth-v(i).width)/2)):e=t.carouselWidth-b(r-i)-v(i).width:e=i==r-1?b(0)-(v(i).width-v(0).width)/2-d:b(i-1)+(v(i-1).width-v(i).width)/2+d,e},w=function(i){var e=n,t=s,r=1,o=t-e.slidesPerScroll
if(2>o&&(o=2),"center"==e.hAlign){var a=(t-1)/2,d=o/2,h=a+1-d,c=a+d
0==i?r=1:(r=e.backOpacity,i>=h&&c>=i&&(r=0))}else 0==i?r=1:(r=e.backOpacity,t-o>i||(r=0))
return r},y=function(i){for(var e=[],t=n,r=s,o=0;r>o;o++){var a=v(o)
"left"==t.hAlign?(e[o]={width:a.width,height:a.height,top:m(o),left:b(o),opacity:w(o)},"bottom"==t.vAlign&&(e[o]={width:a.width,height:a.height,bottom:m(o),left:b(o),opacity:w(o)})):(e[o]={width:a.width,height:a.height,top:m(o),right:b(o),opacity:w(o)},"bottom"==t.vAlign&&(e[o]={width:a.width,height:a.height,bottom:m(o),right:b(o),opacity:w(o)}))}return e[i]},x=function(i){var e=h,t=i-e
return e>i&&(t+=s),t},k=function(i){var e,t=s,r=n.hAlign
return e="left"==r||"right"==r?i==t-1?t-1:t-(2+i):i>=0&&(t-1)/2>=i?t-1-i:i-1},A=function(i){var e=n
1==e.autoplay&&1==e.pauseOnHover&&_()},M=function(i){var e=n
1==e.autoplay&&1==e.pauseOnHover&&1==f&&$()},q=function(){var i=n,e=s,t=d
o.css({width:i.carouselWidth+"px",height:i.carouselHeight+"px"}).bind("mouseover",A).bind("mouseout",M)
for(var r=0;e>r;r++){var c=a.eq(r)
c.css(y(x(r))).bind("click",Z),a.eq(x(r)).css({"z-index":k(r)}),t.eq(r).css(u(x(r)))
var l=c.css("opacity")
0==l?c.hide():c.show()}1==i.mouse&&o.mousewheel(function(i,e){return e>0?(C(h-1,!0,!1),!1):0>e?(C(h+1,!0,!1),!1):void 0})},O=function(i){var e=i.css("opacity")
0==e&&i.hide()},C=function(i,e,t){if(1!=l){var o=n,a=s
1==e&&_(),c=i,c==a&&(c=0),-1==c&&(c=a-1),o.before(r),I(),f=t}},I=function(){var i=s
if(1!=l){if(h==c)return void(l=!1)
if(l=!0,S(h),h>c)var e=i-h+c,t=h-c
else var e=c-h,t=h+i-c
e>t?dir=-1:dir=1,h+=dir,h==i&&(h=0),-1==h&&(h=i-1),G(),L(),j(h)
for(var n=0;i>n;n++)H(n)}},H=function(e){var t=n,o=a.eq(e),f=x(e)
o.show(),o.animate(y(f),t.speed,"linear",function(){O(i(this)),e==s-1&&(l=!1,h!=c?I():(r.current=h,F(h),t.after(r)))}),o.css({"z-index":k(f)}),d.eq(e).animate(u(f),t.speed,"linear"),1==t.reflection&&N(t,o,e),1==t.shadow&&D(t,o,e)},Z=function(e){var t=i(this)
return t.index()!=h?(C(t.index(),!0,!1),!1):void 0},T=function(i){var e=0,t=n
return 1==t.reflection&&(e=t.reflectionHeight*u(i).height),e},W=function(){var e=n,t=a,r=d,o=s,h=e.reflectionOpacity,c="rgba("+e.reflectionColor+","+h+")",l="rgba("+e.reflectionColor+",1)",f='<style type="text/css">'
f+=".slideItem .gradient {",f+="position:absolute; left:0; top:0; margin:0; padding:0; border:none; width:100%; height:100%; ",f+="background: -moz-linear-gradient("+c+","+l+"); ",f+="background: -o-linear-gradient("+c+","+l+"); ",f+="background: -webkit-linear-gradient("+c+","+l+"); ",f+="background: -webkit-gradient(linear, 0% 0%, 0% 100%, from("+c+"), to("+l+")); ",f+="background: linear-gradient("+c+","+l+"); ",f+="} ",f+=".slideItem .reflection {",f+="filter: progid:DXImageTransform.Microsoft.Alpha(style=1,opacity="+100*h+",finishOpacity=0,startX=0,finishX=0,startY=0,finishY=100)",f+="-ms-filter: progid:DXImageTransform.Microsoft.Alpha(style=1,opacity="+100*h+",finishOpacity=0,startX=0,finishX=0,startY=0,finishY=100)",f+="}",f+="</style>",i(f).appendTo("head")
for(var v=0;o>v;v++){var g=r.eq(v).attr("src"),p=u(v)
i('<div class="reflection"></div>').css({position:"absolute",margin:"0",padding:"0",border:"none",overflow:"hidden",left:"0",top:u(v).height+"px",width:"100%",height:T(v)}).appendTo(t.eq(v)).append(i('<img src="'+g+'" />').css({width:p.width+"px",height:p.height+"px",left:"0",margin:"0",padding:"0",border:"none","-moz-transform":"rotate(180deg) scale(-1,1)","-webkit-transform":"rotate(180deg) scale(-1,1)","-o-transform":"rotate(180deg) scale(-1,1)",transform:"rotate(180deg) scale(-1,1)",filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"})).append('<div class="gradient"></div>')}},N=function(i,e,t){var n=e.children(".reflection"),r=i.speed,o=u(x(t))
n.animate({top:o.height+"px",height:T(x(t))},r,"linear"),n.children("img").animate(o,r,"linear")},X=function(i){var e=0
return 1==n.shadow&&(e=.1*u(i).height),e},z=function(i){var e,t=a.eq(i).find(".shadow"),n=t.children(".shadowLeft"),r=t.children(".shadowRight")
t.children(".shadowMiddle")
return e=u(i).width-(n.width()+r.width())},B=function(){var e=a,t=s,r=u(0).width,o='<div class="shadowLeft"></div><div class="shadowMiddle"></div><div class="shadowRight"></div>'
"center"!=n.hAlign&&(r=u(t-1).width)
for(var d=0;t>d;d++){var h=e.eq(d)
i('<div class="shadow"></div>').css({width:r+"px","z-index":"-1",position:"absolute",margin:"0",padding:"0",border:"none",overflow:"hidden",left:"0",bottom:"0"}).append(o).appendTo(h).children("div").css({position:"relative","float":"left"}),h.find(".shadow").children(".shadowMiddle").width(z(d))}},D=function(i,e,t){e.find(".shadow").children(".shadowMiddle").animate({width:z(x(t))+"px"},i.speed,"linear")},P=function(){var i=e
i.append('<div class="nextButton"></div><div class="prevButton"></div>'),i.children(".nextButton").bind("click",function(i){C(h+1,!0,!1)}),i.children(".prevButton").bind("click",function(i){C(h-1,!0,!1)})},Y=function(){var t=e,r=s,o="bullet",a="bulletActive"
"numbers"==n.buttonNav&&(o="numbers",a="numberActive"),t.append('<div class="buttonNav"></div>')
for(var d=t.children(".buttonNav"),h=0;r>h;h++){var c=""
"numbers"==o&&(c=h+1),i('<div class="'+o+'"></div>').css({"text-align":"center"}).bind("click",function(e){C(i(this).index(),!0,!1)}).appendTo(d)}var l=d.children("."+o)
l.eq(0).addClass(a),d.css({width:s*l.outerWidth(!0),height:l.outerHeight(!0)})},L=function(){var i=n,t=e.children(".buttonNav")
if("numbers"==i.buttonNav){var r=t.children(".numbers")
r.removeClass("numberActive"),r.eq(h).addClass("numberActive")}else{var o=t.children(".bullet")
o.removeClass("bulletActive"),o.eq(h).addClass("bulletActive")}},R=function(){for(var e=i(n.descriptionContainer),t=(e.width(),e.height(),e.children("div")),r=t.length,o=0;r>o;o++)t.eq(o).hide().css({position:"absolute",top:"0",left:"0"})
t.eq(0).show()},S=function(e){var t=n
if(1==t.description){var r=i(t.descriptionContainer)
r.children("div").eq(e).hide()}},j=function(e){var t=n
if(1==t.description){var r=i(t.descriptionContainer)
r.children("div").eq(e).show()}},Q=function(){var e=u(0)
i('<div class="spinner"></div>').hide().css(y(0)).css({width:e.width+"px",height:e.height+"px","z-index":s+3,position:"absolute",cursor:"pointer",overflow:"hidden",padding:"0",margin:"0",border:"none"}).appendTo(o)},E=function(){Q()
var e=u(0)
i('<div class="videoOverlay"></div>').hide().css(y(0)).css({width:e.width+"px",height:e.height+"px","z-index":s+2,position:"absolute",cursor:"pointer",overflow:"hidden",padding:"0",margin:"0",border:"none"}).bind("click",U).appendTo(o),F(h)},F=function(i){a.eq(i).children("a").hasClass("video")&&o.children(".videoOverlay").show()},G=function(){var i=o
i.children(".videoOverlay").hide().children().remove(),i.children(".spinner").hide()},J=function(e){var t,n=videos
return i.each(n,function(i,n){if(e.match(n.reg)){var r=e.split(n.split)[n.index].split("?")[0].split("&")[0]
t=n.url.replace("%id%",r)}}),t},K=function(){var e=o.children(".videoOverlay"),t=a.eq(h).children("a").attr("href"),n=J(t)
i("<iframe></iframe>").attr({width:e.width()+"px",height:e.height()+"px",src:n,frameborder:"0"}).bind("load",V).appendTo(e)},U=function(e){K(),o.children(".spinner").show(),i(this).hide(),1==n.autoplay&&(_(),f=!1)},V=function(i){var e=o
e.children(".videoOverlay").show(),e.children(".spinner").hide()},$=function(){intervalProcess=setInterval(function(){C(h+1,!1,!0)},n.autoplayInterval)},_=function(){return 1==n.autoplay?void clearInterval(intervalProcess):void 0}
this.prev=function(){C(h-1,!0,!1)},this.next=function(){C(h+1,!0,!1)},this.goTo=function(i){C(i,!0,!1)},this.pause=function(){_(),f=!1},this.resume=function(){1==n.autoplay&&$()}}
i.fn.carousel=function(i){for(var t=[],n=0;n<this.length;n++)this[n].carousel||(this[n].carousel=new e(this[n],i),this[n].carousel.init()),t.push(this[n].carousel)
return t.length>1?t:t[0]},i.fn.carousel.defaults={hAlign:"center",vAlign:"center",hMargin:.4,vMargin:.2,frontWidth:400,frontHeight:300,carouselWidth:1e3,carouselHeight:360,left:0,right:0,top:0,bottom:0,backZoom:.8,slidesPerScroll:5,speed:500,buttonNav:"none",directionNav:!1,autoplay:!0,autoplayInterval:3e3,pauseOnHover:!0,mouse:!0,shadow:!1,reflection:!1,reflectionHeight:.2,reflectionOpacity:.5,reflectionColor:"255,255,255",description:!1,descriptionContainer:".description",backOpacity:1,before:function(i){},after:function(i){}}}(jQuery)
